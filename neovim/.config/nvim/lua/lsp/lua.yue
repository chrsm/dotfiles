lua =
  make: (on_attach) ->
    import "cmp_nvim_lsp" as cap

    {
      capabilities: cap.update_capabilities vim.lsp.protocol.make_client_capabilities!
      on_attach: on_attach
      flags:
        debounce_text_changes: 150
      settings:
        Lua:
          diagnostics:
            globals:
              * "vim"
          telemetry:
            enable: false
    }

export default lua
